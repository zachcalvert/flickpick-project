{% extends 'pages/page.html' %}
{% load page_tags %}

{% block page_title %}
    My Reel
{% endblock %}

{% block content %}
    <h2 style="color:black; margin-bottom:15px">
        Favorites
    </h2>

    <div class="movie-gallery">
        <div class="gallery-widget" id="user-reel-gallery">
            {% for movie in user_movies %}
                <div class="gallery-item" id="movie-{{ movie.id }}">
                    {% if movie.poster_url %}
                        <div class="movie-image-wrap">
                            <a href="{{ movie.profile_url }}"><img class="movie-image"
                                                                      src="{{ movie.poster_url }}"
                                                                      alt="{{ movie.title }} image"></a>
                        </div>
                        
                        {% if movie.title %}
                            <p class="movie-title">{{ movie.title|safe }} - ({{ movie.year }})</p>
                        {% endif %}

                        {% if movie.id|has_rating %}
                            {% with movie.id|get_rating as rating %}
                                <div class="rate-it" data-score="{{ rating }}">
                                    <a class="seen-it-link" href="javascript:;"></a>
                                </div>
                            {% endwith %}
                        {% elif movie.id|has_been_seen %}
                            <div class="rate-it">
                                <a class="seen-it-link" href="javascript:;"></a>
                            </div>
                        {% else %}
                            <div class="seen-it">
                                <a class="seen-it-link" href="javascript:;">I've Seen This!</a>
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="product-list-footer">
        {% with user_books as page_obj %}
            {% include 'pager.html' %}
        {% endwith %}
    </div>

{% endblock %}