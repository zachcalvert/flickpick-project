{% extends 'pages/page.html' %}
{% load static page_tags i18n %}

{% block extra_css %}
	{{ block.super }}
	<link href="{% static 'css/movie_profile.css' %}" rel="stylesheet">
{% endblock %}

{% block title %}
    {{ movie.title }}
{% endblock %}


{% block content %}
    <div id="movie-profile">
        <div id="movie-cover-image">
            <img id="movie-cover" src="{{ movie.poster_url }}" width="320px">
        </div>

        <div id="movie-title">
            <h1>{{ movie.title }}</h1>
        </div>

        <div id="movie-sub-header">

            <div id="movie-watch-now">
                <div class="movie-details">
                    {% block details %}
	                    <ul class="movie-stream-options">
	                    	<li><a href="#">Available on Netflix: {{ movie.on_netflix }}</a></li>
	                    	<li><a href="#">Available on Hulu: {{ movie.on_hulu }}</a></li>
	                    	<li><a href="#">Available on Amazon: {{ movie.on_amazon }}</a></li>
	                    </ul>
                    {% endblock %}
                </div>
            </div>
        </div>

        <div class="movie-description">
            <p>{{ movie.plot|safe }}</p>
        </div>

        <div id="movie-details" class="hidden-on-mobile">
            <div id="profile-directors">
                <h3>{% trans 'Directed By' %}</h3>
                <ul class="credits-list">
                    {% for director in movie.directors.all %}
                        <li class="credits-list-item"><a href="{{ director.person.get_absolute_url }}">{{ director }}</a></li>
                    {% endfor %}
                </ul>
            </div>

            <div id="profile-actors">
                <h3>{% trans 'Featuring' %}</h3>
                <ul class="credits-list">
                    {% for actor in movie.actors.all %}
                        <li class="credits-list-item"><a href="{{ actor.person.get_absolute_url }}">{{ actor }}</a></li>
                    {% endfor %}
                </ul>
            </div>

            <div id="profile-writers">
                <h3>{% trans 'Written By' %}</h3>
                <ul class="credits-list">
                    {% for writer in movie.writers.all %}
                    	<li class="credits-list-item"><a href="{{ writer.person.get_absolute_url }}">{{ writer }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div id="movie-footers">
        {% if movie.related %}
            <h4>Similar Titles</h4>
            {% for movie in movie.related %}
                {% include 'widgets/items/movie.html' %}
            {% endfor %}
        {% endif %}
    </div>


    <div class="mobile-movie-menus">
		<div class="mobile-movie-info-trigger">
			<a href="javascript:;">{% trans 'Directed By' %} <i class="fa fa-chevron-down"></i></a>
		</div>
		<div class="mobile-movie-info-target">
		    <div id="profile-directors">
		        <h3>{% trans 'Directed By' %}</h3>
		        <ul class="credits-list">
                    {% for director in movie.directors.all %}
                        <li class="credits-list-item"><a href="{{ director.person.get_absolute_url }}">{{ director }}</a></li>
                    {% endfor %}
                </ul>
		    </div>
		</div>

		<div class="mobile-movie-info-trigger">
			<a href="javascript:;">{% trans 'Featuring' %} <i class="fa fa-chevron-down"></i></a>
		</div>
		<div class="mobile-movie-info-target">
		    <div id="profile-directors">
		        <h3>{% trans 'Featuring' %}</h3>
		        <ul class="credits-list">
                    {% for director in movie.directors.all %}
                        <li class="credits-list-item"><a href="{{ director.person.get_absolute_url }}">{{ director }}</a></li>
                    {% endfor %}
                </ul>
		    </div>
		</div>

		<div class="mobile-movie-info-trigger">
			<a href="javascript:;">{% trans 'Written By' %} <i class="fa fa-chevron-down"></i></a>
		</div>
		<div class="mobile-movie-info-target">
		    <div id="profile-directors">
		        <h3>{% trans 'Written By' %}</h3>
		        <ul class="credits-list">
                    {% for director in movie.directors.all %}
                        <li class="credits-list-item"><a href="{{ director.person.get_absolute_url }}">{{ director }}</a></li>
                    {% endfor %}
                </ul>
		    </div>
		</div>

    </div>
{% endblock %}

{% block extra_body_content %}
    {{ block.super }}
    <script>

        var mobileWidgetRow =  $(".widget-row-{{ movie.id }}");
                mobileWidgetRow.bxSlider({
                    minSlides: 2,
                    maxSlides: 4,
                    slideWidth: 90,
                    slideMargin: 15,
                    adaptiveHeight: true,
                    pager: false,
                    nextSelector: ".next-items-{{ book.id }}",
                    prevSelector: ".prev-items-{{ book.id }}",
                    prevText: '<i class="fa fa-angle-left"></i>',
                    nextText: '<i class="fa fa-angle-right"></i>'
                });

        $('.mobile-movie-info-trigger a').click(function(){
            if($(this).children().first().hasClass('fa-chevron-down')) {
                $(this).parent().next().slideDown();
                $(this).children().first().attr('class','fa fa-chevron-up');
                mobileWidgetRow.reloadSlider();
            }
            else {
                $(this).parent().next().slideUp();
                $(this).children().first().attr('class','fa fa-chevron-down');
            }
        });
    </script>
{% endblock %}